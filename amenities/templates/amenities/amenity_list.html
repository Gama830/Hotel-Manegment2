{% extends 'base.html' %} 

{% block content %}
<div style="max-width: 1200px; margin: 20px auto; padding: 20px">
  <div
    style="
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    "
  >
    <h2>Amenities Master List</h2>
    <a
      href="{% url 'amenity-create' %}"
      style="
        padding: 10px 20px;
        background-color: #28a745;
        color: white;
        text-decoration: none;
        border-radius: 4px;
      "
      >Add New Amenity</a
    >
  </div>

  {% if messages %} 
  {% for message in messages %}
  <div
    style="
      padding: 10px;
      margin-bottom: 20px;
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 4px;
      color: #155724;
    "
  >
    {{ message }}
  </div>
  {% endfor %} 
  {% endif %}

  <div
    style="
      background-color: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    "
  >
    <table style="width: 100%; border-collapse: collapse">
      <thead style="background-color: #6f42c1; color: white">
        <tr>
          <th
            style="
              padding: 15px;
              text-align: left;
              border-bottom: 1px solid #ddd;
            "
          >
            Name
          </th>
          <th
            style="
              padding: 15px;
              text-align: left;
              border-bottom: 1px solid #ddd;
            "
          >
            Description
          </th>
          <th
            style="
              padding: 15px;
              text-align: left;
              border-bottom: 1px solid #ddd;
            "
          >
            Applicable Room Types
          </th>
          <th
            style="
              padding: 15px;
              text-align: left;
              border-bottom: 1px solid #ddd;
            "
          >
            Quantity Limit
          </th>
          <th
            style="
              padding: 15px;
              text-align: left;
              border-bottom: 1px solid #ddd;
            "
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody>
        {% for amenity in amenities %}
        <tr style="border-bottom: 1px solid #eee">
          <td style="padding: 15px; font-weight: 500;">{{ amenity.name }}</td>
          <td style="padding: 15px;">{{ amenity.description|default:"â€”" }}</td>
          <td style="padding: 15px;">
            {% if amenity.applicable_room_types.all %}
              {% for room_type in amenity.applicable_room_types.all %}
                <span style="padding: 2px 6px; border-radius: 3px; font-size: 11px; background-color: #e3f2fd; color: #1976d2; margin-right: 4px; display: inline-block;">
                  {{ room_type.name }}
                </span>
              {% endfor %}
            {% else %}
              <span style="color: #666; font-style: italic;">All room types</span>
            {% endif %}
          </td>
          <td style="padding: 15px;">
            {% if amenity.quantity_limit %}
              {{ amenity.quantity_limit }}
            {% else %}
              <span style="color: #666; font-style: italic;">Unlimited</span>
            {% endif %}
          </td>
          <td style="padding: 15px">
            <a
              href="{% url 'amenity-edit' amenity.pk %}"
              style="color: #007bff; text-decoration: none; margin-right: 10px; padding: 4px 8px; border: 1px solid #007bff; border-radius: 3px; font-size: 12px;"
              >Edit</a
            >
            <a 
              href="{% url 'amenity-delete' amenity.pk %}" 
              style="color: #dc3545; text-decoration: none; padding: 4px 8px; border: 1px solid #dc3545; border-radius: 3px; font-size: 12px;"
              onclick="return confirm('Are you sure you want to delete amenity {{ amenity.name }}?')"
              >Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td
            colspan="5"
            style="padding: 30px; text-align: center; color: #666"
          >
            No amenities found.
            <a href="{% url 'amenity-create' %}">Create your first amenity</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if is_paginated %}
  <div style="margin-top: 20px; text-align: center">
    <span>
      {% if page_obj.has_previous %}
      <a href="?page=1" style="margin: 0 5px; text-decoration: none"
        >&laquo; first</a
      >
      <a
        href="?page={{ page_obj.previous_page_number }}"
        style="margin: 0 5px; text-decoration: none"
        >previous</a
      >
      {% endif %}

      <span style="margin: 0 10px">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
      </span>

      {% if page_obj.has_next %}
      <a
        href="?page={{ page_obj.next_page_number }}"
        style="margin: 0 5px; text-decoration: none"
        >next</a
      >
      <a
        href="?page={{ page_obj.paginator.num_pages }}"
        style="margin: 0 5px; text-decoration: none"
        >last &raquo;</a
      >
      {% endif %}
    </span>
  </div>
  {% endif %}
</div>
{% endblock %}