{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/common.css' %}" />
{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">üõéÔ∏è {{ service.service_name }}</h1>
        <div style="display: flex; gap: 10px;">
            <a href="{% url 'service-update' service.id %}" class="btn btn-warning">
                ‚úèÔ∏è Edit Service
            </a>
            <a href="{% url 'service-bill' service.id %}" class="btn btn-success">
                üí≥ Bill Service
            </a>
            <a href="{% url 'service-list' %}" class="btn btn-secondary">
                ‚Üê Back to List
            </a>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
        <!-- Main Information -->
        <div class="card">
            <div class="card-body">
                <h3 style="color: #667eea; margin-bottom: 20px; border-bottom: 2px solid #667eea; padding-bottom: 10px;">
                    üìã Service Information
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Service ID:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace;">{{ service.service_id }}</p>
                    </div>
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Service Name:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">{{ service.service_name }}</p>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Status:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                            {% if service.is_active %}
                                <span class="status-active">‚úÖ Active</span>
                            {% else %}
                                <span class="status-inactive">‚ùå Inactive</span>
                            {% endif %}
                        </p>
                    </div>
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Booking Required:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                            {% if service.requires_booking %}
                                <span style="color: #ffc107;">üìÖ Yes</span>
                            {% else %}
                                <span style="color: #28a745;">üö∂ Walk-in</span>
                            {% endif %}
                        </p>
                    </div>
                </div>

                {% if service.max_capacity %}
                <div style="margin-bottom: 25px;">
                    <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Max Capacity:</label>
                    <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">{{ service.max_capacity }} person{{ service.max_capacity|pluralize }}</p>
                </div>
                {% endif %}

                {% if service.description %}
                <div style="margin-bottom: 25px;">
                    <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Description:</label>
                    <div style="margin: 0; padding: 15px; background: #f8f9fa; border-radius: 4px; border-left: 4px solid #007bff;">
                        {{ service.description|linebreaks }}
                    </div>
                </div>
                {% endif %}

                <h3 style="color: #667eea; margin: 30px 0 20px 0; border-bottom: 2px solid #667eea; padding-bottom: 10px;">
                    üí∞ Pricing Information
                </h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Base Rate:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                            <span style="font-size: 1.5rem; color: #28a745; font-weight: bold;">‚Çπ{{ service.rate_cost }}</span>
                        </p>
                    </div>
                    <div>
                        <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Tax Status:</label>
                        <p style="margin: 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                            <span class="status-badge" style="background: 
                                {% if service.tax_applicable %}#fff3cd; color: #856404;{% else %}#d4edda; color: #155724;{% endif %}">
                                {% if service.tax_applicable %}Tax Applicable{% else %}No Tax{% endif %}
                            </span>
                            {% if service.tax_applicable %}
                                <br><strong>Total with Tax:</strong> 
                                <span style="color: #28a745; font-weight: bold;">‚Çπ{{ service.total_cost_with_tax|floatformat:2 }}</span>
                                <small style="color: #666;">(incl. 18% GST)</small>
                            {% endif %}
                        </p>
                    </div>
                </div>

                <h3 style="color: #667eea; margin: 30px 0 20px 0; border-bottom: 2px solid #667eea; padding-bottom: 10px;">
                    üïí Availability
                </h3>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; font-weight: bold; color: #333; margin-bottom: 5px;">Schedule:</label>
                    <div style="margin: 0; padding: 15px; background: #e3f2fd; border-radius: 4px; border-left: 4px solid #2196f3;">
                        <strong>{{ service.get_availability_display }}</strong><br>
                        {% if service.availability == 'CUSTOM' %}
                            {% if service.available_from and service.available_to %}
                                <strong>Hours:</strong> {{ service.available_from|time:"H:i" }} - {{ service.available_to|time:"H:i" }}<br>
                            {% endif %}
                            {% if service.available_days %}
                                <strong>Days:</strong> {{ service.available_days }}<br>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div>
            <!-- Quick Stats -->
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-body">
                    <h4 style="color: #333; margin-bottom: 15px;">üìä Quick Stats</h4>
                    <div style="text-align: center;">
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 32px; font-weight: bold; color: #28a745;">‚Çπ{{ service.rate_cost }}</div>
                            <div style="font-size: 14px; color: #666;">Base Rate</div>
                        </div>
                        {% if service.tax_applicable %}
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 24px; font-weight: bold; color: #17a2b8;">‚Çπ{{ service.total_cost_with_tax|floatformat:2 }}</div>
                            <div style="font-size: 14px; color: #666;">With Tax</div>
                        </div>
                        {% endif %}
                        {% if service.max_capacity %}
                        <div style="margin-bottom: 15px;">
                            <div style="font-size: 24px; font-weight: bold; color: #ffc107;">{{ service.max_capacity }}</div>
                            <div style="font-size: 14px; color: #666;">Max Capacity</div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Service Features -->
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-body">
                    <h4 style="color: #333; margin-bottom: 15px;">‚ú® Features</h4>
                    <div style="font-size: 14px; color: #666;">
                        <div style="margin-bottom: 10px; display: flex; align-items: center;">
                            {% if service.is_active %}
                                <span style="color: #28a745;">‚úÖ</span>
                            {% else %}
                                <span style="color: #dc3545;">‚ùå</span>
                            {% endif %}
                            <span style="margin-left: 8px;">Currently Available</span>
                        </div>
                        <div style="margin-bottom: 10px; display: flex; align-items: center;">
                            {% if service.requires_booking %}
                                <span style="color: #ffc107;">üìÖ</span>
                                <span style="margin-left: 8px;">Advance Booking Required</span>
                            {% else %}
                                <span style="color: #28a745;">üö∂</span>
                                <span style="margin-left: 8px;">Walk-in Available</span>
                            {% endif %}
                        </div>
                        <div style="margin-bottom: 10px; display: flex; align-items: center;">
                            {% if service.tax_applicable %}
                                <span style="color: #ffc107;">üí∞</span>
                                <span style="margin-left: 8px;">Tax Applicable</span>
                            {% else %}
                                <span style="color: #28a745;">üí∏</span>
                                <span style="margin-left: 8px;">Tax Free</span>
                            {% endif %}
                        </div>
                        {% if service.max_capacity %}
                        <div style="margin-bottom: 10px; display: flex; align-items: center;">
                            <span style="color: #17a2b8;">üë•</span>
                            <span style="margin-left: 8px;">Max {{ service.max_capacity }} person{{ service.max_capacity|pluralize }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="card">
                <div class="card-body">
                    <h4 style="color: #333; margin-bottom: 15px;">üïí Timeline</h4>
                    <div style="font-size: 14px; color: #666;">
                        <div style="margin-bottom: 10px;">
                            <strong>Created:</strong><br>
                            {{ service.created_at|date:"M d, Y g:i A" }}
                        </div>
                        <div>
                            <strong>Last Updated:</strong><br>
                            {{ service.updated_at|date:"M d, Y g:i A" }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}